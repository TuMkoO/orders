var Me=Object.defineProperty,Le=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var le=(e,o,r)=>o in e?Me(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,ne=(e,o)=>{for(var r in o||(o={}))Te.call(o,r)&&le(e,r,o[r]);if(re)for(var r of re(o))Ve.call(o,r)&&le(e,r,o[r]);return e},se=(e,o)=>Le(e,Ce(o));var M=(e,o,r)=>new Promise((a,w)=>{var R=g=>{try{d(r.next(g))}catch(k){w(k)}},c=g=>{try{d(r.throw(g))}catch(k){w(k)}},d=g=>g.done?a(g.value):Promise.resolve(g.value).then(R,c);d((r=r.apply(e,o)).next())});import{b as q,C as Ue}from"./ClosePopup.642a79ff.js";import{_ as _e,r as y,a as Oe,c as Re,B as E,br as K,o as Fe,D as Ae,$ as Z,g as m,d as A,f as i,w as u,e as h,ar as D,Q as I,i as Ie,aI as Pe,j as b,T as W,aU as xe,aV as qe,U as X,V as de,W as B,X as ie,O as v,h as P,as as Ee}from"./index.c6ab3c0f.js";import{L as Be,Q as Qe,a as He}from"./ListenersForm.292295dd.js";import{u as ze,a as x,e as me,c as J,Q as Ge}from"./array.90849054.js";import{A as je}from"./AppModal.78b45cc8.js";import{U as Ke}from"./UsersForm.9fe15f73.js";function ce(e){return{email:e.email,id:e._id,firstName:e.firstName,secondName:e.secondName,lastName:e.lastName,post:e.post,phone:e.phone,companyFullName:e.companyFullName,companyShortName:e.companyShortName,companyOwnershipType:e.companyOwnershipType,companyOwnershipTypeOptions:e.companyOwnershipTypeOptions,companyLegalAddressCode:e.companyLegalAddressCode,companyLegalAddressCity:e.companyLegalAddressCity,companyLegalAddressTownship:e.companyLegalAddressTownship,companyLegalAddressStreet:e.companyLegalAddressStreet,companyLegalAddressHouse:e.companyLegalAddressHouse,companyLegalAddressRoom:e.companyLegalAddressRoom,companyMailAddressCode:e.companyMailAddressCode,companyMailAddressCity:e.companyMailAddressCity,companyMailAddressTownship:e.companyMailAddressTownship,companyMailAddressStreet:e.companyMailAddressStreet,companyMailAddressHouse:e.companyMailAddressHouse,companyMailAddressRoom:e.companyMailAddressRoom,companyPhone:e.companyPhone,companyEmail:e.companyEmail,companyBank:e.companyBank,companyPayment:e.companyPayment,companyInn:e.companyInn,companyOkpo:e.companyOkpo,companyBik:e.companyBik,companyDirFirstName:e.companyDirFirstName,companyDirSecondName:e.companyDirSecondName,companyDirLastName:e.companyDirLastName,companyDirPost:e.companyDirPost,companyGrounds:e.companyGrounds}}function Ze(e){return{id:e._id,status:e.status,numberNk:e.numberNk,numberRi:e.numberRi,firstName:e.firstName,secondName:e.secondName,lastName:e.lastName,gender:e.gender,snils:e.snils,post:e.post,birthday:e.birthday,passportSeries:e.passportSeries,passportNumber:e.passportNumber,passportIssued:e.passportIssued,passportDate:e.passportDate,passportCode:e.passportCode,mailCode:e.mailCode,city:e.city,township:e.township,street:e.street,homeNumber:e.homeNumber,apartment:e.apartment,phone:e.phone,email:e.email,education:e.education,institution:e.institution,specialization:e.specialization,diplomSeries:e.diplomSeries,diplomNumber:e.diplomNumber,diplomDate:e.diplomDate,weldingMethodDateRde:e.weldingMethodDateRde,weldingMethodDateSp:e.weldingMethodDateSp,weldingMethodDateSf:e.weldingMethodDateSf,weldingMethodDateMig:e.weldingMethodDateMig,weldingMethodDateMag:e.weldingMethodDateMag,weldingMethodDatePag:e.weldingMethodDatePag,weldingMethodDatePig:e.weldingMethodDatePig,weldingMethodDateVig:e.weldingMethodDateVig,weldingMethodDatePs:e.weldingMethodDatePs,weldingMethodDateGs:e.weldingMethodDateGs,weldingMethodDateNi:e.weldingMethodDateNi,weldingMethodDateZn:e.weldingMethodDateZn,weldingMethodDateNg:e.weldingMethodDateNg,weldingMethodDateE:e.weldingMethodDateE,methodNkDateVik:e.methodNkDateVik,methodNkDateVd:e.methodNkDateVd,methodNkDateTk:e.methodNkDateTk,methodNkDatePvk:e.methodNkDatePvk,methodNkDatePvt:e.methodNkDatePvt,methodNkDateMk:e.methodNkDateMk,methodNkDateUk:e.methodNkDateUk,methodNkDateRk:e.methodNkDateRk,methodNkDateMi:e.methodNkDateMi,methodNkDate1s:e.methodNkDate1s,typeRiDateMsi:e.typeRiDateMsi,typeRiDateMdi:e.typeRiDateMdi,typeRiDateIt:e.typeRiDateIt,typeRiDateIks:e.typeRiDateIks,typeRiDateTi:e.typeRiDateTi,typeRiDateIsm:e.typeRiDateIsm,typeRiDateSe:e.typeRiDateSe,typeRiDateSvi:e.typeRiDateSvi,weldingProductionDate:e.weldingProductionDate,pkInfo:e.pkInfo,attNkInfo:e.attNkInfo,attRiInfo:e.attRiInfo,ownerUser:e.ownerUser}}const We={components:{AppModal:je,ListenersForm:Be,UsersForm:Ke},props:{orderType:{type:String,required:!0},orderData:{type:Object,required:!1}},emits:["updateSuccess","hide"],setup(e,{emit:o}){const r=y(!1),a=Oe(),w=Re(),{handleSubmit:R}=ze(),c=a.getters["auth/user"],d=y(!1),g=E(()=>{var t;return(t=f.value)!=null&&t.value?d.value?ce(a.getters["auth/users"].filter(s=>s._id==f.value.value)[0]):ce(se(ne({},c),{_id:c.id})):null}),k=E(()=>{var t;return(t=N.value)!=null&&t.value?Ze(a.getters["listener/listeners"].filter(s=>s._id==N.value.value)[0]):null}),n=y(!1),U=y(""),_=y(""),F=E(()=>a.getters["auth/users"].map(t=>({value:t._id,description:t.companyShortName,label:t.companyFullName}))),Q=y(F.value),H=y(),z=y(),Y=y(),$=y(),L=y(""),C=y(""),T=y(""),p=y("\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A"),O=E(()=>a.getters["listener/listeners"].map(t=>({value:t._id,label:t.firstName+" "+t.secondName+" "+t.lastName+" ("+K(t.birthday)+")"}))),G=y(O.value),ee=y(0);Fe(()=>M(this,null,function*(){r.value=!0,c.roles.length&&(c.roles.includes("admin")||c.roles.includes("god")?(d.value=!0,yield a.dispatch("auth/loadUsers")):d.value=!1),e.orderData?(d.value?f.value=F.value.map(t=>t).filter(t=>t.value==e.orderData.ownerUser)[0]:(f.value={value:c.id,description:c.companyShortName,label:c.companyFullName},N.value=O.value.map(t=>t).filter(t=>t.value==e.orderData.ownerListener)[0]),ae.value=e.orderData.program,p.value=e.orderData.status,L.value=e.orderData.commentUser,C.value=e.orderData.commentListener,T.value=e.orderData.commentOrder,te.value=e.orderData.contractNumber,oe.value=e.orderData.contractDate):f.value={value:c.id,description:c.companyShortName,label:c.companyFullName},r.value=!1}));const{value:f,errorMessage:ue}=x("usersSelect",me().required("\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u0438\u044F\u0442\u0438\u0435").nullable()),{value:N,errorMessage:pe}=x("listenersSelect",me().required("\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043B\u0443\u0448\u0430\u0442\u0435\u043B\u044F").nullable()),{value:ae,errorMessage:ye}=x("program",J().required("\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E\u0439 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B \u043F\u043E\u0432\u044B\u0448\u0435\u043D\u0438\u044F \u043A\u0432\u0430\u043B\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438")),{value:te,errorMessage:ve}=x("contractNumber",J().trim()),{value:oe,errorMessage:ge}=x("contractDate",J().trim().nullable());Ae(f,(t,s)=>M(this,null,function*(){t!==""&&t!==null?yield a.dispatch("listener/loadByCompany",t.value):a.commit("listener/setListeners",[]),e.orderData&&(ee.value+=1),t!==s&&(ee.value==1&&e.orderData?N.value=O.value.map(l=>l).filter(l=>l.value==e.orderData.ownerListener)[0]:N.value=void 0)}));function De(t,s){s(()=>{if(t===""){s(()=>{Q.value=F.value});return}else{const l=t.toLowerCase();Q.value=F.value.filter(V=>V.label.toLowerCase().indexOf(l)>-1||V.description.toLowerCase().indexOf(l)>-1)}})}function fe(t,s,l){s(()=>{if(t===""){s(()=>{G.value=O.value});return}else{const V=t.toLowerCase();G.value=O.value.filter(S=>S.label.toLowerCase().indexOf(V)>-1)}})}function he(){}const be=t=>M(this,null,function*(){if(H.value.hidePopup(),H.value.updateInputValue("",!0),d.value&&(z.value.hidePopup(),z.value.updateInputValue("",!0)),n.value=!0,t=="addListener")U.value="addListener",_.value="\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u043E\u0433\u043E \u0441\u043B\u0443\u0448\u0430\u0442\u0435\u043B\u044F";else if(t=="editListener"){U.value="editListener",_.value="\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0441\u043B\u0443\u0448\u0430\u0442\u0435\u043B\u044F";try{r.value=!0,Y.value=yield a.dispatch("listener/loadById",N.value.value),r.value=!1}catch(s){r.value=!1}}else if(t=="addCompany")U.value="addCompany",_.value="\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u043E\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u0438\u044F\u0442\u0438\u0435";else if(t=="editCompany"){U.value="editCompany",_.value="\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u0438\u044F\u0442\u0438\u044F";try{r.value=!0,yield a.dispatch("settingsConfigurable/load","ownership-type"),$.value=yield a.dispatch("auth/loadUserById",f.value.value),r.value=!1}catch(s){r.value=!1}}}),j=()=>{n.value=!1,U.value="",_.value=""},we=t=>M(this,null,function*(){c.roles&&(c.roles.includes("admin")||c.roles.includes("god")?f.value?yield a.dispatch("listener/loadByCompany",f.value.value):a.commit("listener/setListeners",[]):yield a.dispatch("listener/loadByCompany",c.id)),j();const s=O.value.map(l=>l).filter(l=>t.id?l.value==t.id:l.label==t.firstName+" "+t.secondName+" "+t.lastName+" ("+K(t.birthday)+")")[0];N.value=s}),ke=t=>M(this,null,function*(){yield a.dispatch("auth/loadUsers"),j();const s=F.value.map(l=>l).filter(l=>t.id?l.value==t.id:l.label==t.fullName)[0];f.value=s}),Ne=R(t=>M(this,null,function*(){try{yield a.dispatch("orderTraining/create",{type:e.orderType,program:t.program,status:p.value,commentUser:L.value,commentListener:C.value,commentOrder:T.value,contractNumber:t.contractNumber,contractDate:t.contractDate,listener:k.value,user:g.value,ownerListener:t.listenersSelect.value,ownerUser:t.usersSelect.value}),w.push("/orders-training-nk")}catch(s){}})),Se=R(t=>M(this,null,function*(){var V;const s=e.orderData._id,l={type:e.orderType,program:t.program,status:p.value,number:"",commentUser:L.value,commentListener:C.value,commentOrder:T.value,contractNumber:t.contractNumber,contractDate:t.contractDate,date:new Date,listener:k.value,user:g.value,ownerListener:t.listenersSelect.value,ownerUser:t.usersSelect.value};try{if(d.value&&p.value=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443"&&!L.value&&!C.value&&!T.value)a.dispatch("setMessage",{value:"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u0438\u043D \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439",type:"danger"});else if(d.value&&p.value=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443"&&(L.value||C.value||T.value))yield a.dispatch("orderTraining/update",{value:l,id:s}),w.push("/orders-training-nk");else if(d.value&&p.value=="\u0418\u0434\u0451\u0442 \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u0435"&&(L.value||C.value||T.value))a.dispatch("setMessage",{value:"\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043D\u0430\u0447\u0430\u0442\u044C \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u0435, \u043D\u0435 \u0443\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u044B \u0432\u0441\u0435 \u0437\u0430\u043C\u0435\u0447\u0430\u043D\u0438\u044F",type:"danger"});else if(d.value&&p.value=="\u041F\u0440\u0438\u043D\u044F\u0442\u0430 \u0432 \u0440\u0430\u0431\u043E\u0442\u0443")l.commentUser="",l.commentListener="",l.commentOrder="",yield a.dispatch("orderTraining/update",{value:l,id:s}),o("updateSuccess");else if(d.value&&p.value=="\u0418\u0434\u0451\u0442 \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u0435"){if(((V=e==null?void 0:e.orderData)==null?void 0:V.status)=="\u0418\u0434\u0451\u0442 \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u0435")l.number=e.orderData.number;else{yield a.dispatch("orderTrainingNumbering/load");const S=a.getters["orderTrainingNumbering/ordersNumbering"][0];l.number=S.prefix+S.num,yield a.dispatch("orderTrainingNumbering/update",{prefix:S.prefix,num:+S.num+1,id:S._id})}l.date=new Date,yield a.dispatch("orderTraining/update",{value:l,id:s}),o("updateSuccess")}else d.value&&p.value=="\u0412\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0430"?(l.number=e.orderData.number,l.date=new Date,yield a.dispatch("orderTraining/update",{value:l,id:s}),o("updateSuccess")):!d.value&&p.value=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443"?(yield a.dispatch("orderTraining/update",{value:l,id:s}),w.push("/orders-training-nk")):!d.value&&p.value=="\u041F\u0440\u0438\u043D\u044F\u0442\u0430 \u0432 \u0440\u0430\u0431\u043E\u0442\u0443"?(l.status="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A",yield a.dispatch("orderTraining/update",{value:l,id:s}),w.push("/orders-training-nk")):d.value&&p.value=="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A"?(l.commentUser="",l.commentListener="",l.commentOrder="",yield a.dispatch("orderTraining/update",{value:l,id:s}),w.push("/orders-training-nk")):!d.value&&p.value=="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A"||d.value&&(p.value=="\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430 \u043D\u0430 \u044D\u043A\u0441\u043F\u0435\u0440\u0442\u0438\u0437\u0443"||p.value=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443"||p.value=="\u041E\u0442\u043C\u0435\u043D\u0435\u043D\u0430")?(yield a.dispatch("orderTraining/update",{value:l,id:s}),w.push("/orders-training-nk")):(yield a.dispatch("orderTraining/update",{value:l,id:s}),o("updateSuccess"))}catch(S){}}));return{access:d,loading:r,modal:n,modalType:U,modalTitle:_,currentListener:Y,currentCompany:$,showModal:be,closeModal:j,onSubmit:Ne,update:Se,updateListeners:we,updateUsers:ke,dateFormat:K,usersSelectOptions:Q,usersSelectFilterFn:De,usersSelect:f,usersSelectError:ue,listenersSelect:N,listenersSelectError:pe,contractNumber:te,contractDate:oe,cNumberError:ve,cDateError:ge,commentUser:L,commentListener:C,commentOrder:T,filterFn:fe,abortFilterFn:he,program:ae,programError:ye,status:p,listenerOptions:G,listenerSelectRef:H,usersSelectRef:z,programOptionsNK:[{label:"\u041D\u0435\u0440\u0430\u0437\u0440\u0443\u0448\u0430\u044E\u0449\u0438\u0439 \u043C\u0435\u0442\u043E\u0434 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430 \xAB\u0412\u0438\u0437\u0443\u0430\u043B\u044C\u043D\u044B\u0439 \u0438 \u0438\u0437\u043C\u0435\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\xBB (\u0412\u0418\u041A)",value:"vik"},{label:"\u041D\u0435\u0440\u0430\u0437\u0440\u0443\u0448\u0430\u044E\u0449\u0438\u0439 \u043C\u0435\u0442\u043E\u0434 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044F \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \xAB\u0412\u0438\u0431\u0440\u043E\u0434\u0438\u0430\u0433\u043D\u043E\u0441\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\xBB (\u0412\u0414)",value:"vd"},{label:"\u041D\u0435\u0440\u0430\u0437\u0440\u0443\u0448\u0430\u044E\u0449\u0438\u0439 \u043C\u0435\u0442\u043E\u0434 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044F \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \xAB\u0422\u0435\u043F\u043B\u043E\u0432\u043E\u0439 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\xBB (\u0422\u041A)",value:"tk"},{label:"\u041D\u0435\u0440\u0430\u0437\u0440\u0443\u0448\u0430\u044E\u0449\u0438\u0439 \u043C\u0435\u0442\u043E\u0434 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430 \xAB\u041A\u0430\u043F\u0438\u043B\u043B\u044F\u0440\u043D\u044B\u0439 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\xBB (\u041F\u0412\u041A)",value:"pvk"},{label:"\u041D\u0435\u0440\u0430\u0437\u0440\u0443\u0448\u0430\u044E\u0449\u0438\u0439 \u043C\u0435\u0442\u043E\u0434 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430 \xAB\u0422\u0435\u0447\u0435\u0438\u0441\u043A\u0430\u043D\u0438\u0435\xBB (\u041F\u0412\u0422)",value:"pvt"},{label:"\u041D\u0435\u0440\u0430\u0437\u0440\u0443\u0448\u0430\u044E\u0449\u0438\u0439 \u043C\u0435\u0442\u043E\u0434 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430 \xAB\u041C\u0430\u0433\u043D\u0438\u0442\u043D\u044B\u0439 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\xBB (\u041C\u041A)",value:"mk"},{label:"\u041D\u0435\u0440\u0430\u0437\u0440\u0443\u0448\u0430\u044E\u0449\u0438\u0439 \u043C\u0435\u0442\u043E\u0434 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430 \xAB\u0423\u043B\u044C\u0442\u0440\u0430\u0437\u0432\u0443\u043A\u043E\u0432\u043E\u0439 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\xBB (\u0423\u041A)",value:"uk"},{label:"\u041D\u0435\u0440\u0430\u0437\u0440\u0443\u0448\u0430\u044E\u0449\u0438\u0439 \u043C\u0435\u0442\u043E\u0434 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430 \xAB\u0420\u0430\u0434\u0438\u043E\u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\xBB (\u0420\u041A)",value:"rk"}],programOptionsRI:[{label:"\xAB\u041C\u0435\u0445\u0430\u043D\u0438\u0447\u0435\u0441\u043A\u0438\u0435 \u0438\u0441\u043F\u044B\u0442\u0430\u043D\u0438\u044F \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432\xBB (\u041C\u0418)",value:"mi"}],statusOptions:["\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430 \u043D\u0430 \u044D\u043A\u0441\u043F\u0435\u0440\u0442\u0438\u0437\u0443","\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443","\u041F\u0440\u0438\u043D\u044F\u0442\u0430 \u0432 \u0440\u0430\u0431\u043E\u0442\u0443","\u0418\u0434\u0451\u0442 \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u0435","\u0412\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0430","\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A"]}}},Xe={class:"row q-col-gutter-sm"},Je={key:0,class:"col-12 col-xs-12 col-sm-4 col-md-4 col-lg-4"},Ye={key:1,class:"col-12 col-xs-12 col-sm-4 col-md-4 col-lg-4"},$e={key:2,class:"col-12 col-xs-12 col-sm-4 col-md-4 col-lg-4"},ea={class:"row items-center justify-end"},aa={key:3,class:"col-12"},ta={class:"col-12"},oa={class:"col-12"},ra={class:"col-12"},la={class:"col-12 col-xs-12 col-sm-12 col-md-12 col-lg-12"},na={class:"row q-col-gutter-sm"},sa={class:"col-12"};function da(e,o,r,a,w,R){const c=Z("ListenersForm"),d=Z("UsersForm"),g=Z("app-modal");return m(),A("div",null,[i(Ge,{onSubmit:P(a.onSubmit,["prevent","stop"]),class:"q-gutter-md"},{default:u(()=>{var k;return[h("div",Xe,[a.access?(m(),A("div",Je,[i(q,{square:"",modelValue:a.status,"onUpdate:modelValue":o[0]||(o[0]=n=>a.status=n),options:a.statusOptions,label:"\u0421\u0442\u0430\u0442\u0443\u0441",dense:""},null,8,["modelValue","options"])])):D("",!0),a.access?(m(),A("div",Ye,[i(I,{modelValue:a.contractNumber,"onUpdate:modelValue":o[1]||(o[1]=n=>a.contractNumber=n),modelModifiers:{trim:!0},label:"\u041D\u043E\u043C\u0435\u0440 \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0430",dense:""},null,8,["modelValue"])])):D("",!0),a.access?(m(),A("div",$e,[i(I,{label:"\u0414\u0430\u0442\u0430 \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0430",modelValue:a.contractDate,"onUpdate:modelValue":o[3]||(o[3]=n=>a.contractDate=n),mask:"date",dense:""},{append:u(()=>[i(Ie,{name:"event",class:"cursor-pointer"},{default:u(()=>[i(Qe,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:u(()=>[i(He,{modelValue:a.contractDate,"onUpdate:modelValue":o[2]||(o[2]=n=>a.contractDate=n)},{default:u(()=>[h("div",ea,[Pe(i(b,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[Ue]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):D("",!0),a.access?(m(),A("div",aa,[i(q,{modelValue:a.usersSelect,"onUpdate:modelValue":o[7]||(o[7]=n=>a.usersSelect=n),ref:"usersSelectRef","use-input":"","input-debounce":"0",label:"\u041F\u0440\u0435\u0434\u043F\u0440\u0438\u044F\u0442\u0438\u0435",options:a.usersSelectOptions,onFilter:a.usersSelectFilterFn,behavior:"menu",error:!!a.usersSelectError,"error-message":a.usersSelectError,"options-dense":"",dense:""},{option:u(n=>[i(W,xe(qe(n.itemProps)),{default:u(()=>[i(X,null,{default:u(()=>[i(de,null,{default:u(()=>[B(ie(n.opt.label),1)]),_:2},1024),i(de,{caption:""},{default:u(()=>[B(ie(n.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":u(()=>[i(W,null,{default:u(()=>[i(X,{class:"text-grey"},{default:u(()=>[B("\u041F\u043E \u0432\u0430\u0448\u0435\u043C\u0443 \u0437\u0430\u043F\u0440\u043E\u0441\u0443 \u043D\u0435\u0442 \u0441\u043E\u0432\u043F\u0430\u0434\u0435\u043D\u0438\u0439")]),_:1}),h("div",null,[i(b,{icon:"add_home_work",type:"button",color:"primary",onClick:o[4]||(o[4]=n=>a.showModal("addCompany"))})])]),_:1})]),append:u(()=>[a.usersSelect?(m(),v(b,{key:0,round:"",dense:"",flat:"",icon:"mode_edit",onClick:o[5]||(o[5]=P(n=>a.showModal("editCompany"),["stop","prevent"]))})):(m(),v(b,{key:1,round:"",dense:"",flat:"",icon:"add_home_work",onClick:o[6]||(o[6]=P(n=>a.showModal("addCompany"),["stop","prevent"]))}))]),_:1},8,["modelValue","options","onFilter","error","error-message"])])):D("",!0),h("div",ta,[a.access||!a.access&&r.orderData&&r.orderData.status=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443"&&a.commentUser?(m(),v(I,{key:0,square:"",filled:"",autogrow:"",readonly:!a.access,type:"textarea",modelValue:a.commentUser,"onUpdate:modelValue":o[8]||(o[8]=n=>a.commentUser=n),label:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044E \u0434\u0430\u043D\u043D\u044B\u0445 \u043E \u043F\u0440\u0435\u0434\u043F\u0440\u0438\u044F\u0442\u0438\u0438",dense:""},null,8,["readonly","modelValue"])):D("",!0)]),h("div",oa,[i(q,{label:"\u0421\u043B\u0443\u0448\u0430\u0442\u0435\u043B\u044C",square:"","use-input":"","input-debounce":"0",modelValue:a.listenersSelect,"onUpdate:modelValue":o[12]||(o[12]=n=>a.listenersSelect=n),ref:"listenerSelectRef",options:a.listenerOptions,error:!!a.listenersSelectError,"error-message":a.listenersSelectError,onFilter:a.filterFn,onFilterAbort:a.abortFilterFn,"options-dense":"",dense:""},{"no-option":u(()=>[i(W,null,{default:u(()=>[i(X,{class:"text-grey"},{default:u(()=>[B("\u041F\u043E \u0432\u0430\u0448\u0435\u043C\u0443 \u0437\u0430\u043F\u0440\u043E\u0441\u0443 \u043D\u0435\u0442 \u0441\u043E\u0432\u043F\u0430\u0434\u0435\u043D\u0438\u0439")]),_:1}),h("div",null,[i(b,{icon:"person_add",type:"button",color:"primary",onClick:o[9]||(o[9]=n=>a.showModal("addListener"))})])]),_:1})]),append:u(()=>[a.listenersSelect?(m(),v(b,{key:0,round:"",dense:"",flat:"",icon:"mode_edit",onClick:o[10]||(o[10]=P(n=>a.showModal("editListener"),["stop","prevent"]))})):(m(),v(b,{key:1,round:"",dense:"",flat:"",icon:"person_add",onClick:o[11]||(o[11]=P(n=>a.showModal("addListener"),["stop","prevent"]))}))]),_:1},8,["modelValue","options","error","error-message","onFilter","onFilterAbort"])]),h("div",ra,[a.access||!a.access&&r.orderData&&r.orderData.status=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443"&&a.commentListener?(m(),v(I,{key:0,square:"",filled:"",autogrow:"",readonly:!a.access,type:"textarea",modelValue:a.commentListener,"onUpdate:modelValue":o[13]||(o[13]=n=>a.commentListener=n),label:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044E \u0434\u0430\u043D\u043D\u044B\u0445 \u043E \u0441\u043B\u0443\u0448\u0430\u0442\u0435\u043B\u0435",dense:""},null,8,["readonly","modelValue"])):D("",!0)]),h("div",la,[i(q,{square:"",modelValue:a.program,"onUpdate:modelValue":o[14]||(o[14]=n=>a.program=n),options:r.orderType=="nk"?a.programOptionsNK:a.programOptionsRI,label:"\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430 \u043F\u043E\u0432\u044B\u0448\u0435\u043D\u0438\u044F \u043A\u0432\u0430\u043B\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438","emit-value":"","map-options":"",error:!!a.programError,"error-message":a.programError,"options-dense":"",dense:""},null,8,["modelValue","options","error","error-message"])])]),h("div",na,[h("div",sa,[a.access||!a.access&&r.orderData&&r.orderData.status=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443"&&a.commentOrder?(m(),v(I,{key:0,square:"",filled:"",autogrow:"",readonly:!a.access,type:"textarea",modelValue:a.commentOrder,"onUpdate:modelValue":o[15]||(o[15]=n=>a.commentOrder=n),label:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044E \u0437\u0430\u044F\u0432\u043A\u0438",dense:""},null,8,["readonly","modelValue"])):D("",!0)])]),h("div",null,[r.orderData&&a.access||r.orderData&&!a.access&&r.orderData.status=="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A"||r.orderData&&!a.access&&(r.orderData.status=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443"||r.orderData.status=="\u041F\u0440\u0438\u043D\u044F\u0442\u0430 \u0432 \u0440\u0430\u0431\u043E\u0442\u0443")?(m(),v(b,{key:0,label:!a.access&&r.orderData.status=="\u041F\u0440\u0438\u043D\u044F\u0442\u0430 \u0432 \u0440\u0430\u0431\u043E\u0442\u0443"?"\u0412 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:a.update,color:"primary",class:"q-mr-md"},null,8,["label","onClick"])):D("",!0),r.orderData?D("",!0):(m(),v(b,{key:1,label:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C",type:"submit",color:"primary",class:"q-mr-md"})),r.orderData&&a.access&&r.orderData.status!=="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A"&&r.orderData.status!=="\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430 \u043D\u0430 \u044D\u043A\u0441\u043F\u0435\u0440\u0442\u0438\u0437\u0443"&&r.orderData.status!=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443"||!a.access&&((k=r.orderData)==null?void 0:k.status)=="\u041F\u0440\u0438\u043D\u044F\u0442\u0430 \u0432 \u0440\u0430\u0431\u043E\u0442\u0443"?(m(),v(b,{key:2,label:"\u041E\u0442\u043C\u0435\u043D\u0430",onClick:o[16]||(o[16]=n=>e.$emit("hide")),color:"primary"})):!r.orderData||r.orderData.status=="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A"||r.orderData&&!a.access&&r.orderData.status!=="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A"||r.orderData&&a.access&&(r.orderData.status=="\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430 \u043D\u0430 \u044D\u043A\u0441\u043F\u0435\u0440\u0442\u0438\u0437\u0443"||r.orderData.status=="\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u043D\u0430 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0443")?(m(),v(b,{key:3,label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"primary",to:"/orders-training-nk"})):D("",!0)])]}),_:1},8,["onSubmit"]),(m(),v(Ee,{to:"body"},[i(g,{title:a.modalTitle,show:a.modal&&!a.loading,fullSize:"",onClose:a.closeModal},{default:u(()=>[a.modalType=="addListener"?(m(),v(c,{key:0,buttonTitle:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",submitType:"add",company:a.usersSelect,onSuccess:a.updateListeners,onHide:a.closeModal},null,8,["company","onSuccess","onHide"])):a.modalType=="editListener"?(m(),v(c,{key:1,buttonTitle:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",submitType:"update",listener:a.currentListener,onSuccess:a.updateListeners,onHide:a.closeModal},null,8,["listener","onSuccess","onHide"])):D("",!0),a.modalType=="addCompany"?(m(),v(d,{key:2,buttonTitle:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",submitType:"register",onSuccess:a.updateUsers},null,8,["onSuccess"])):a.modalType=="editCompany"?(m(),v(d,{key:3,buttonTitle:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",submitType:"update",user:a.currentCompany,onSuccess:a.updateUsers},null,8,["user","onSuccess"])):D("",!0)]),_:1},8,["title","show","onClose"])]))])}var ga=_e(We,[["render",da]]);export{ga as O};
